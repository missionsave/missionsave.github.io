 <!DOCTYPE html>

 <html>

 <head>
 	<meta name="google" value="notranslate">
	<meta name="google-adsense-account" content="ca-pub-7469281181086429">
 	<!-- <meta http-equiv="cache-control" content="no-cache, must-revalidate, post-check=0, pre-check=0" /> -->
 	<!-- <meta http-equiv="cache-control" content="max-age=0" /> -->
 	<!-- <meta http-equiv="expires" content="0" /> -->
 	<!-- <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" /> -->
 	<!-- <meta http-equiv="pragma" content="no-cache" /> -->
 	<!-- <link rel="shortcut icon" href="favicon.ico"> -->
 	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
 	<meta content="text/html; charset=UTF-8" http-equiv="content-type">
	
	<meta property="og:description" content="This project aims to create innovative machines capable of preparing 40 fresh, healthy meals every single day.">

 	<!-- <title translate="no" class="notranslate">Foundation Mission SAVE</title> -->

 	<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"> -->
 	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
 	<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">  -->

 	<link rel="stylesheet" type="text/css" href="https://missionsave.github.io/style.css?0">
	
	<link rel="icon" type="image/x-icon" href="https://missionsave.github.io/favicon.ico">
	<link rel="shortcut icon" href="https://missionsave.github.io/favicon.ico">
	<link rel="icon" type="image/png" href="https://missionsave.github.io/favicon.png">


<script>
	function dropdownFunction() {
		var elements = document.querySelectorAll('.dropdown-content');

		elements.forEach(function(element) {
			// Do something with each element, for example:
			console.log(element.textContent); // Logs the text content of each 
			element.classList.remove('show');
		});
		document.getElementById(arguments[0]).classList.toggle("show");
	}

	// Close the dropdown menu if the user clicks outside of it, nao funciona n sei porque
		window.onclick = function (event) {
			if (!event.target.matches('.dropbtn')) {
				var dropdowns = document.getElementsByClassName("dropdown-content");
				var i;
				for (i = 0; i < dropdowns.length; i++) {
					var openDropdown = dropdowns[i];
					if (openDropdown.classList.contains('show')) {
						openDropdown.classList.remove('show');
					}
				}
			}
		}

	function myFunction() {
		var x = document.getElementById("myTopnav");
		if (x.className === "topnav") {
			x.className += " responsive";
		} else {
			x.className = "topnav";
		}
	}
</script>


 </head>

 <body onresize="onresizeFunction()">

 	<div class="topheader" id="topheaderid">
 		<div class="topnav" id="myTopnav">
 			<a href="?" class="active notranslate">Foundation Mission SAVE</a>
 			<title class="active notranslate">Foundation Mission SAVE</title>

 			<!-- <div class="dropdownc">
<button id="myDropdown1b"  onclick="dropdownFunction('myDropdown1')" class="dropbtn">Estufa com abrigo
<i class="fa fa-caret-down"></i>
</button>
<div  id="myDropdown1" class="dropdown-content">
<a style="" href="?pg=descritiva">Memoria Descritiva</a><a style="" href="?pg=budget">Orçamento do Protótipo</a><a style="" href="?pg=nutri">Factos Nutricionais</a></div>
</div> -->


<!-- ["page1.html", "d1/page1.html", "d1/page3.html", "page3.html"] -->

<!-- fetch('pages.json')
  .then(res => res.json())
  .then(files => {
    files.forEach(file => console.log(file));
  }); -->





 			<!-- <div class="dropdownc">
 				<button  onclick="dropdownFunction('myDropdown1')" class="dropbtn">Estufas
 					<i class="fa fa-caret-down"></i>
 				</button>
 				<div id="myDropdown1" class="dropdown-content">
 					<a style="" href="?p=Technology-to-fight-hunger.html">Apresentação</a>
					<a style="" href="?p=nutrition.html">nutrition</a>
					<a style="cursor:pointer;" onclick="loadPage('home.html')">Nutrindo esperança</a>
				</div>
 			</div> -->


			<!-- <a  onclick='loadPage("gest/index.html"); return false;'>gest</a>
			<a  onclick='loadPage("pages/Nutrition.html"); return false;'>Nutrition</a>
			<a  onclick='loadPage("pages/Technology-to-fight-hunger.html"); return false;'>Tec</a> -->

			<a href="?p=Nutrition.html">Nutrition</a>
			<a style="cursor:pointer;" href="?p=Technology-to-fight-hunger.html">Studys</a>
			<a style="cursor:pointer;" href="?p=Self-sufficient_Greenhouse.html">Self-sufficient Greenhouse</a>
			<!-- <a style="cursor:pointer;" href="?p=contact.html">Contact</a> -->



 			<!-- <div class="dropdownc">
 				<button   onclick="dropdownFunction('myDropdown3')" class="dropbtn">Extras
 					<i class="fa fa-caret-down"></i>
 				</button>
 				<div id="myDropdown3" class="dropdown-content">
 					<a style="" href="?p=extras/Millions.html">Euromilions</a>
					</div>
 			</div> -->

 			<!-- <div class="dropdownc">
 				<button   onclick="dropdownFunction('myDropdown3')" class="dropbtn">Estufa que produz sopa
 					<i class="fa fa-caret-down"></i>
 				</button>
 				<div id="myDropdown3" class="dropdown-content">
 					<a style="" href="?pg=descritiva">Memoria Descritiva</a>
					<a style="" href="?pg=budget">Orçamento do Protótipo</a>
					<a style="" href="?pg=nutri">Factos Nutricionais</a>
					<a style="" href="?pg=develop">Desenvolvimento</a><a style="" href="?pg=faq">FAQ</a> 				</div>
 			</div> -->




 			<!-- <div class="dropdownc">
 				 				<button id="myDropdown4b" onclick="dropdownFunction('myDropdown4')" class="dropbtn">Trabalho
 					<i class="fa fa-caret-down"></i>
 				</button>
 				<div id="myDropdown4" class="dropdown-content">
 					<a style="" href="?pg=jobs">Contratação</a><a style="" href="?pg=ponto">Ponto</a> 				</div>
 			</div> -->

 			<!-- <div class="dropdownc">
 				 				<button id="myDropdown5b" onclick="dropdownFunction('myDropdown5')" class="dropbtn">Missão
 					<i class="fa fa-caret-down"></i>
 				</button>
 				<div id="myDropdown5" class="dropdown-content">
 					<a style="" href="?pg=mission">Missão</a><a style="" href="?pg=donate">Doar para as crianças</a> 				</div>
 			</div> -->

 			
 			<!-- <div class="dropdownc">
 				 				<button id="myDropdown6b" onclick="dropdownFunction('myDropdown6')" class="dropbtn">Fábrica
 					<i class="fa fa-caret-down"></i>
 				</button>
 				<div id="myDropdown6" class="dropdown-content">
 					<a style="" href="?pg=plan">Plano de negócio</a> 				</div>
 			</div> -->

 			<!-- <a href="	?pg=fund  ">Fundo de investimento</a>  -->







 			<div class="dropdownc">
 				 				<button onclick="dropdownFunction('myDropdown7')" class="dropbtn"><i class="fas  fa-globe"></i>
 					<i class="fa fa-caret-down"></i>
 				</button>
 				<div id="myDropdown7" class="dropdown-content">
 					<a class="notranslate" style="cursor:pointer;" onclick="menut('pt-PT'); ">pt-PT</a>
 					<a class="notranslate" style="cursor:pointer;" onclick="menut('en');">en</a>
 					<a class="notranslate" style="cursor:pointer;" onclick="menut('fr');">fr</a>
 					<a class="notranslate" style="cursor:pointer;" onclick="menut('es');">es</a>
 				</div>
 			</div>
 			<!-- <script src="util.js?2038973299"></script> -->




<script>
	var langbr="";
	const params = new URLSearchParams(window.location.search);
	const lValue = params.get("l");
	if(!lValue || lValue.trim() === ""){
		// 1) Prefer the first full tag from navigator.languages

		const fromLanguages = (navigator.languages || []).find(l => l.includes('-'));

		// 2) Fallback: Intl often canonicalizes to a regioned locale
		const fromIntl = Intl?.DateTimeFormat?.().resolvedOptions().locale;

		// 3) Last resort: plain navigator.language
		const fromNav = navigator.language;

		const raw = fromLanguages || (fromIntl?.includes('-') ? fromIntl : fromNav);

		// Normalize casing like "pt-PT"
		const locale = raw.split('-').map((p,i) => i ? p.toUpperCase() : p.toLowerCase()).join('-');console.log('Detected locale:', locale);
		langbr = locale;

		// const userLang = navigator.language || navigator.userLanguage;
		// params.set('l', 'en');  
		params.set('l', langbr);  
		const newUrl = `${window.location.pathname}?${params.toString()}`;
		window.history.replaceState({}, '', newUrl);
	}else{
		langbr=lValue;
	} 
	console.log("langbr", langbr);

	function gtElInit() {
		var lib = new google.translate.TranslateService();
		lib.translatePage('', langbr, function() {
			// div_loader.style.display="none"; 
			// div_all.style.display="block"; 
		});
	}
</script>
<script async src="https://translate.google.com/translate_a/element.js?cb=gtElInit&amp;hl=pt-PT&amp;client=wt" type="text/javascript"></script>
<style>
	/* Hide top banner */
	.goog-te-banner-frame.skiptranslate {
		display: none !important;
	}

	body {
		top: 0 !important;
	}

	/* Hide tooltip/balloon/rating UI */
	#goog-gt-tt,
	.goog-te-balloon-frame,
	.goog-tooltip {
		display: none !important;
	}

	.goog-text-highlight {
		background: none !important;
		box-shadow: none !important;
	}

	/* Sometimes the widget injects a fixed bottom-right card */
	#goog-gt-vt,
	.goog-te-gadget-icon {
		display: none !important;
	}
</style>



 			<a href="javascript:void(0);" style="font-size:15px;" class="icon" onclick="myFunction()"><b>&#9776;</b></a>
 		</div>
 	</div>

 	<div id="nexttotop" align="center" style="padding-left:10px; padding-right:10px;">
 		<h2></h2> 	
	</div>
 	<script type="text/javascript">
 		function onresizeFunction() {
 			var clientHeight = document.getElementById("topheaderid").clientHeight;
 			document.getElementById('nexttotop').style.paddingTop = clientHeight + 'px';
 		}
 		onresizeFunction();
 	</script>




 	<div id="viewer" class="htr" ></div>



<!-- keep l -->
<script>
//   const params = new URLSearchParams(window.location.search);
  const l = params.get('l');

  if (l) {
    document.querySelectorAll('a[href]').forEach(a => {
      const href = a.getAttribute('href').trim();
      if (!href || href === '#' || href === '') return;

      // Split original href into [base, query, hash]
      const [base, queryAndHash] = href.split('?', 2);
      let query = '';
      let hash = '';

      if (queryAndHash) {
        const hashIndex = queryAndHash.indexOf('#');
        if (hashIndex >= 0) {
          query = queryAndHash.slice(0, hashIndex);
          hash = queryAndHash.slice(hashIndex);
        } else {
          query = queryAndHash;
        }
      }

      const searchParams = new URLSearchParams(query);
      searchParams.set('l', l);

      // Rebuild without trimming the original base
      const newHref = base + '?' + searchParams.toString() + hash;
      a.setAttribute('href', newHref);
    });
  }
</script>




<script>
	function menut(lng) {
		console.log("lng", lng);
		// setCookieNeverExpires('lang', lng);
		params.set('l', lng);
		window.location.search = params.toString();
		// location.reload();
	}
</script>

<script>
	function loadPage(url) {

		fetch(url)
			.then(response => response.text())
			.then(html => {
				document.getElementById('viewer').innerHTML = html;
			})
			.catch(err => {
				document.getElementById('viewer').innerHTML = "<p>Error loading page.</p>";
			});
	}
function loadPage_v2(url) {
  fetch(url)
    .then(r => r.text())
    .then(html => {
      const viewer = document.getElementById('viewer');
      viewer.innerHTML = html;

      viewer.querySelectorAll('script').forEach(oldScript => {
        const script = document.createElement('script');

        if (oldScript.src) {
          script.src = oldScript.src;
        } else {
          script.textContent = oldScript.textContent;
        }

        // carry over attributes like type/integrity/etc. if you need them
        Array.from(oldScript.attributes).forEach(({ name, value }) => {
          script.setAttribute(name, value);
        });

        oldScript.parentNode.replaceChild(script, oldScript);
      });
    })
    .catch(() => {
      document.getElementById('viewer').innerHTML = "<p>Error loading page.</p>";
    });
}

async function loadPage_v1(url, addToHistory = true) {
  try {
	// url="https://missionsave.github.io/"+url;
    const resp = await fetch(url);
    if (!resp.ok) throw new Error("HTTP " + resp.status);
    const html = await resp.text();

    // Parse HTML
    const parser = new DOMParser();
    const doc = parser.parseFromString(html, "text/html");

    // Replace viewer content
    const viewer = document.getElementById("viewer");
    viewer.innerHTML = doc.body.innerHTML;

    // Execute <script> tags
    viewer.querySelectorAll("script").forEach(oldScript => {
      const newScript = document.createElement("script");
      if (oldScript.src) {
        // newScript.src = oldScript.src; // external script
      } else {
        // newScript.textContent = oldScript.textContent; // inline script
      }
      document.body.appendChild(newScript);
      document.body.removeChild(newScript);
    });

    // Update browser history (for back/forward)
    // if (addToHistory) {
    //   history.pushState({ url }, "", url);
    // }
  } catch (err) {
    document.getElementById("viewer").innerHTML =
      "<p>Error loading page: " + err.message + "</p>";
  }
}

// Handle back/forward buttons
// window.addEventListener("popstate", e => {
//   if (e.state && e.state.url) {
//     loadPage(e.state.url, false); // don't push again
//   }
// });



const pValue = params.get("p");
if (pValue){ //replace "%2F" from p to "/"
	// Clone current params without 'p'
	const params = new URLSearchParams(window.location.search);
	params.delete('p');

	// Build query string manually for 'p' so slashes stay literal
	const encodedP = encodeURIComponent(pValue).replace(/%2F/g, '/');

	// Combine: 'p' first, then the rest of the params
	let qs = `p=${encodedP}`;
	const rest = params.toString();
	if (rest) qs += `&${rest}`;

	const newUrl = `${window.location.pathname}?${qs}${window.location.hash || ''}`;
	window.history.replaceState({}, '', newUrl);

}

	console.log(pValue);
	if (!pValue || pValue.trim() === "") {
		// loadPage('gest/index.html');
		// loadPage('https://missionsave.github.io/gest/index.html');
		loadPage_v2('https://missionsave.github.io/home.html');
		// loadPage('https://missionsave.github.io/home.html');
	} else {
		// loadPage("pages/"+pValue);
		// loadPage_v2("pages/"+pValue);
		loadPage_v2("https://missionsave.github.io/pages/"+pValue);
		// loadPage("https://missionsave.github.io/pages/"+pValue);
	}
</script>

</body>
</html>

 		 		


 		 		