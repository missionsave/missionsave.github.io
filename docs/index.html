 <!DOCTYPE html>

 <html>

 <head>
 	<meta name="google" value="notranslate">
	<meta name="google-adsense-account" content="ca-pub-7469281181086429">
 	<!-- <meta http-equiv="cache-control" content="no-cache, must-revalidate, post-check=0, pre-check=0" /> -->
 	<!-- <meta http-equiv="cache-control" content="max-age=0" /> -->
 	<!-- <meta http-equiv="expires" content="0" /> -->
 	<!-- <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" /> -->
 	<!-- <meta http-equiv="pragma" content="no-cache" /> -->
 	<!-- <link rel="shortcut icon" href="favicon.ico"> -->
 	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
 	<meta content="text/html; charset=UTF-8" http-equiv="content-type">
	
	<meta property="og:description" content="This project aims to create innovative machines capable of preparing 40 fresh, healthy meals every single day.">

 	<title translate="no" class="notranslate">Foundation Mission SAVE</title>

 	<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"> -->
 	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
 	<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">  -->

  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://unpkg.com/epubjs/dist/epub.min.js"></script> -->

 	<!-- <link  id="pagestyle"  rel="stylesheet" type="text/css" href="style.css?87656576"> -->
 	<!-- <link  id="pagestyle" rel="stylesheet" type="text/css" href="stylerefresh.css?0382"> -->
 	<link rel="stylesheet" type="text/css" href="https://missionsave.github.io/style.css?1">
	
	<link rel="icon" type="image/x-icon" href="https://missionsave.github.io/favicon.ico">
	<link rel="shortcut icon" href="https://missionsave.github.io/favicon.ico">
	<link rel="icon" type="image/png" href="https://missionsave.github.io/favicon.png">

<style>/* disable hover whenever body.no-hover is present */
body.no-hover .dropdownc:hover .dropdown-content {
  display: none !important;
}
</style> 
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7469281181086429"
     crossorigin="anonymous"></script>
<script>
	function dropdownFunction() {
		
		var elements = document.querySelectorAll('.dropdown-content');

		elements.forEach(function(element) {
			// Do something with each element, for example:
			// console.log(element.textContent); // Logs the text content of each 
			element.classList.remove('show');
		});
		document.getElementById(arguments[0]).classList.toggle("show");
	}
	function resetOverrides() {
  // dropdown-content may have inline style or override classes
  document.querySelectorAll('.dropdown-content').forEach(el => {
    el.style.display = '';
    el.classList.remove('show', 'force-hide');
  });

  // If you altered the navbar class for responsive toggle
  const nav = document.getElementById('myTopnav');
  if (nav) nav.className = 'topnav';
}
//good
function closedropdowns() {
	// window.scrollTo(0, 0);

  // 1) Disable hover immediately
  document.body.classList.add('no-hover');

  // 2) Hide any open menus right now
  document.querySelectorAll('.dropdown-content').forEach(function(el) {
    el.classList.remove('show');  // mobile toggle
    el.style.display = 'none';    // inline-hide for desktop
  });

  // 3) Prepare a restore function
  function restore() {
    // Remove our inline hides
    document.querySelectorAll('.dropdown-content').forEach(function(el) {
      el.style.display = '';
    });
    // Re-enable hover
    document.body.classList.remove('no-hover');

    // Cleanup listeners & timeout
    window.removeEventListener('pointermove', restore);
    window.removeEventListener('touchstart', restore);
    clearTimeout(timeoutId);
  }

  // 4) Listen for the very next pointer/touch event
  window.addEventListener('pointermove', restore);
  window.addEventListener('touchstart', restore);

  // 5) Fallback: if no movement within 300ms, restore anyway
  var timeoutId = setTimeout(restore, 300);
}
function updateurl(arg){
	console.log("updateurl",arg);
	console.log("updateurl",arg.href);
	myTopnav.className = "topnav"; //hides responsive menu

// const newUrl = `${window.location.pathname}?${params.toString()}`;
// const newUrl = `${window.location.pathname}?${params.toString()}`;
		// window.history.replaceState({}, '', arg.href);
    history.pushState({  }, "", arg.href);
}
// window.addEventListener('popstate', function (event) {
//     console.log('Back/forward detected', event.state);
// 	window.location.reload(); //could be improved calling loadpage to minimize requests ///////////////////
//     // Call your function here
//     // myFunctionOnHistoryChange(event);
// });

window.addEventListener('popstate', function (event) {
    console.log('Back/forward detected', window.location.search);
	const params = new URLSearchParams(window.location.search);

console.log(params.get('p')); // "value"
console.log(params.get('l'));  // "123"

if(params.get('p')==null){
	loadPage('https://missionsave.github.io/home.html');
	return;
}

var gurl="https://missionsave.github.io/pages/"+params.get('p');
console.log("gurl",gurl);

	loadPage_v2(gurl);
	// console.log(event.state.href);
    // if (event.state && event.state.href) {
    //     console.log(" Load the page dynamically instead of reloading");
    //     loadPage_v2(event.state.href);
    // } else {
    //     // Fallback: reload if no state info
    //     // window.location.reload();
    // }
});

function closedropdowns_v2() {
	console.log("minocente");
	resetOverrides();
	window.dispatchEvent(new Event('resize'));
	// reloadCSS();
return;
  // Add force-hide to all dropdown containers
  document.querySelectorAll('.dropdownc').forEach(function(container) {
    container.classList.add('force-hide');
  });

  // Remove mobile .show class if present
  document.querySelectorAll('.dropdown-content').forEach(function(el) {
    el.classList.remove('show');
  });
}
function reloadCSS_v1() {
  const oldLink = document.getElementById("pagestyle");
  const href = oldLink.getAttribute("href").split("?")[0];

  // create a new <link> with a cache-busting query
  const newLink = document.createElement("link");
  newLink.rel = "stylesheet";
  newLink.href = href + "?v=" + Date.now();
  newLink.id = "pagestyle-new";

  // insert new link right after the old one
  oldLink.parentNode.insertBefore(newLink, oldLink.nextSibling);

  // once the new CSS finishes loading, remove the old one
  newLink.onload = () => {
    oldLink.remove();
    newLink.id = "pagestyle"; // keep consistent id
  };
}
function reloadCSS() { 
	{console.log("inocente");
	const link = document.getElementById("pagestyle");
  const href = link.getAttribute("href").split("?")[0]; // remove old cache buster
  link.setAttribute("href", href + "?v=" + new Date().getTime());}
  return;
	// myDropdown3.classList.remove("show");
	// myDropdown3.delete;
	// return;
	// window.dispatchEvent(new Event("resize"));
	// return;
  // remove inline styles
//   document.querySelectorAll("[style]").forEach(el => el.removeAttribute("style"));
  
  // remove temporary classes you might have added
//   document.querySelectorAll(".show, .active").forEach(el => el.classList.remove("show", "active"));
//   {  const link = document.querySelector("link[href*='style.css']");
//   const href = link.getAttribute("href").split("?")[0];
//   link.setAttribute("href", href + "?v=" + Date.now());}
console.log("reloadCSS1");
// return;
//   const dropdown = document.querySelector(".dropdown-content");
//   dropdown.classList.toggle("show");
//   return;


  const link = document.getElementById("pagestyle");
  const href = link.getAttribute("href").split("?")[0]; // remove old cache buster
  link.setAttribute("href", href + "?v=" + new Date().getTime());
}
// var menuisopened=0;
	function myFunction() {
		// console.log(1);
		var x = document.getElementById("myTopnav");
		if (x.className === "topnav") {
			x.className += " responsive"; 
		} else {
			x.className = "topnav"; 
		}
	}    
	// Close the dropdown menu if the user clicks outside of it, nao funciona n sei porque
		// window.onclick = function (event) {
		// 	// console.log(2);
		// 	// if(dropvisible){
		// 	// console.log("event",event);
		// 	// if (event.target.matches('topnav')) {
		// 	// 	myFunction();
		// 	// }
		// 	// if (!event.target.matches('.dropbtn')) {
		// 	// closedropdowns(); 
		// 	// }
		// }

	document.addEventListener('click', function (event) {
		// console.log(event.target);
		if (!event.target.closest('.dropbtn')) {
			closedropdowns();
		}
		if (!myTopnav.contains(event.target)) {
			// console.log('Clicked outside the box!');
			myTopnav.className = "topnav";
			// You can trigger your logic here, like closing a modal or dropdown
		}
	});

function onresizeFunction() {
    var topHeaderEl = document.getElementById("topheaderid");
    if (topHeaderEl) {
        var clientHeight = topHeaderEl.clientHeight;
        document.getElementById('nexttotop').style.paddingTop = clientHeight + 'px';
    }
}
onresizeFunction();
</script>


 </head>

 <body onresize="onresizeFunction()">

 	<div class="topheader" id="topheaderid">
 		<div class="topnav" id="myTopnav">
 			<a href="?" onclick='updateurl(this); loadPage("https://missionsave.github.io/home.html"); window.scrollTo(0, 0); return false;' class="active notranslate">Foundation Mission SAVE</a>
 			<!-- <title class="notranslate">Foundation Mission SAVE</title> -->

 			<!-- <div class="dropdownc">
<button id="myDropdown1b"  onclick="dropdownFunction('myDropdown1')" class="dropbtn">Estufa com abrigo
<i class="fa fa-caret-down"></i>
</button>
<div  id="myDropdown1" class="dropdown-content">
<a style="" href="?pg=descritiva">Memoria Descritiva</a><a style="" href="?pg=budget">Or√ßamento do Prot√≥tipo</a><a style="" href="?pg=nutri">Factos Nutricionais</a></div>
</div> -->


<!-- ["page1.html", "d1/page1.html", "d1/page3.html", "page3.html"] -->

<!-- fetch('pages.json')
  .then(res => res.json())
  .then(files => {
    files.forEach(file => console.log(file));
  }); -->





 			<!-- <div class="dropdownc">
 				<button  onclick="dropdownFunction('myDropdown1')" class="dropbtn">Estufas
 					<i class="fa fa-caret-down"></i>
 				</button>
 				<div id="myDropdown1" class="dropdown-content">
 					<a style="" href="?p=Technology-to-fight-hunger.html">Apresenta√ß√£o</a>
					<a style="" href="?p=nutrition.html">nutrition</a>
					<a style="cursor:pointer;" onclick="loadPage('home.html')">Nutrindo esperan√ßa</a>
				</div>
 			</div> -->


			<!-- <a  onclick='loadPage("gest/index.html"); return false;'>gest</a>
			<a  onclick='loadPage("pages/Nutrition.html"); return false;'>Nutrition</a>
			<a  onclick='loadPage("pages/Technology-to-fight-hunger.html"); return false;'>Tec</a> -->

			<a  href="?p=Nutrition.html" onclick='updateurl(this); loadPage_v2("https://missionsave.github.io/pages/Nutrition.html"); window.scrollTo(0, 0); return false;' >Nutrition</a>

			<!-- <a style="cursor:pointer;" onclick='loadPage_v2("https://missionsave.github.io/pages/Nutrition.html")' >Nutrition</a> -->


			<a  href="?p=Reality.html" onclick='updateurl(this); loadPage_v2("https://missionsave.github.io/pages/Reality.html"); window.scrollTo(0, 0); return false;' >Reality</a>


			<!-- <a onclick='loadPage_v2("https://missionsave.github.io/pages/Nutrition.html")' href="?p=Nutrition.html">Nutrition</a> -->
			<!-- <a style="cursor:pointer;" href="?p=Technology-to-fight-hunger.html">Studys</a> -->
			<!-- <a style="cursor:pointer;" href="?p=Self-sufficient_Greenhouse.html">Self-sufficient Greenhouse</a> -->
			<!-- <a style="cursor:pointer;" href="?p=contact.html">Contact</a> -->




			<!-- <div class="dropdownc">
				<button onclick="dropdownFunction('myDropdownstdys')" class="dropbtn">Studys
					<i class="fa fa-caret-down"></i>
				</button>
				<div id="myDropdownstdys" class="dropdown-content"> -->
			
					<!-- <a href="?p=Technology-to-fight-hunger.html"
						onclick='updateurl(this); loadPage_v2("https://missionsave.github.io/pages/Technology-to-fight-hunger.html"); window.scrollTo(0, 0); return false;'>Technology	to fight hunger</a> -->
			
					<a href="?p=Self-sufficient_Greenhouse.html"
						onclick='updateurl(this); loadPage_v2("https://missionsave.github.io/pages/Self-sufficient_Greenhouse.html"); window.scrollTo(0, 0); return false;'>Self-sufficient Greenhouse</a>

					<a href="?p=Development.html"
						onclick='updateurl(this); loadPage_v2("https://missionsave.github.io/pages/Development.html"); window.scrollTo(0, 0); return false;'>Development</a>
			
				<!-- </div>
			</div> -->

			<div class="dropdownc">
				<button onclick="dropdownFunction('myDropdownextras')" class="dropbtn">Extras
					<i class="fa fa-caret-down"></i>
				</button>
				<div id="myDropdownextras" class="dropdown-content">
			<!-- ‚ß∏ -->
					<a href="?p=extras/book/index.html"
						onclick='updateurl(this); loadPage_v2("https://missionsave.github.io/pages/extras/book/index.html"); window.scrollTo(0, 0); return false;'>Books</a>

					<a href="?p=extras/AI_crypto_trading_signal.html"
						onclick='updateurl(this); loadPage_v2("https://missionsave.github.io/pages/extras/AI_crypto_trading_signal.html"); window.scrollTo(0, 0); return false;'>AI crypto trading signal</a>
			
			
					<!-- <a href="?p=extras/AI_crypto_trading_signal.html"
						onclick='updateurl(this); loadPage_v2("extras/AI_crypto_trading_signal.html"); window.scrollTo(0, 0); return false;'>AI crypto trading signal</a> -->
			
			
				</div>
			</div>



 			<!-- <div class="dropdownc">
 				<button   onclick="dropdownFunction('myDropdown3')" class="dropbtn">Extras
 					<i class="fa fa-caret-down"></i>
 				</button>
 				<div id="myDropdown3" class="dropdown-content">

			<a style="cursor:pointer;" onclick='closedropdowns(); loadPage_v2("https://missionsave.github.io/pages/Nutrition.html"); ' >Nutrition1</a>
			<a style="cursor:pointer;" onclick='loadPage_v2("https://missionsave.github.io/pages/Nutrition.html")' >Nutrition</a>
 					<a style="" href="?p=extras/Millions.html">Euromilions</a>
					</div>
 			</div> -->








 			<!-- <div class="dropdownc">
 				<button   onclick="dropdownFunction('myDropdown3')" class="dropbtn">Estufa que produz sopa
 					<i class="fa fa-caret-down"></i>
 				</button>
 				<div id="myDropdown3" class="dropdown-content">
 					<a style="" href="?pg=descritiva">Memoria Descritiva</a>
					<a style="" href="?pg=budget">Or√ßamento do Prot√≥tipo</a>
					<a style="" href="?pg=nutri">Factos Nutricionais</a>
					<a style="" href="?pg=develop">Desenvolvimento</a><a style="" href="?pg=faq">FAQ</a> 				</div>
 			</div> -->




 			<!-- <div class="dropdownc">
 				 				<button id="myDropdown4b" onclick="dropdownFunction('myDropdown4')" class="dropbtn">Trabalho
 					<i class="fa fa-caret-down"></i>
 				</button>
 				<div id="myDropdown4" class="dropdown-content">
 					<a style="" href="?pg=jobs">Contrata√ß√£o</a><a style="" href="?pg=ponto">Ponto</a> 				</div>
 			</div> -->

 			<!-- <div class="dropdownc">
 				 				<button id="myDropdown5b" onclick="dropdownFunction('myDropdown5')" class="dropbtn">Miss√£o
 					<i class="fa fa-caret-down"></i>
 				</button>
 				<div id="myDropdown5" class="dropdown-content">
 					<a style="" href="?pg=mission">Miss√£o</a><a style="" href="?pg=donate">Doar para as crian√ßas</a> 				</div>
 			</div> -->

 			
 			<!-- <div class="dropdownc">
 				 				<button id="myDropdown6b" onclick="dropdownFunction('myDropdown6')" class="dropbtn">F√°brica
 					<i class="fa fa-caret-down"></i>
 				</button>
 				<div id="myDropdown6" class="dropdown-content">
 					<a style="" href="?pg=plan">Plano de neg√≥cio</a> 				</div>
 			</div> -->

 			<!-- <a href="	?pg=fund  ">Fundo de investimento</a>  -->







 			<div class="dropdownc">
 				 				<button onclick="dropdownFunction('myDropdown7')" class="dropbtn"><i class="fas  fa-globe"></i>
 					<i class="fa fa-caret-down"></i>
 				</button>
 				<div id="myDropdown7" class="dropdown-content">
 					<a class="notranslate" style="cursor:pointer;" onclick="menut('pt-PT'); ">pt-PT</a>
 					<a class="notranslate" style="cursor:pointer;" onclick="menut('en');">en</a>
 					<a class="notranslate" style="cursor:pointer;" onclick="menut('fr');">fr</a>
 					<a class="notranslate" style="cursor:pointer;" onclick="menut('es');">es</a>
 				</div>
 			</div>
 			<!-- <script src="util.js?2038973299"></script> -->




<script>
	var langbr="";
	const params = new URLSearchParams(window.location.search);
	const lValue = params.get("l");
	if(!lValue || lValue.trim() === ""){
		// 1) Prefer the first full tag from navigator.languages

		const fromLanguages = (navigator.languages || []).find(l => l.includes('-'));

		// 2) Fallback: Intl often canonicalizes to a regioned locale
		const fromIntl = Intl?.DateTimeFormat?.().resolvedOptions().locale;

		// 3) Last resort: plain navigator.language
		const fromNav = navigator.language;

		const raw = fromLanguages || (fromIntl?.includes('-') ? fromIntl : fromNav);

		// Normalize casing like "pt-PT"
		const locale = raw.split('-').map((p,i) => i ? p.toUpperCase() : p.toLowerCase()).join('-');console.log('Detected locale:', locale);
		langbr = locale;

		// const userLang = navigator.language || navigator.userLanguage;
		// params.set('l', 'en');  
		params.set('l', langbr);  
		const newUrl = `${window.location.pathname}?${params.toString()}`;
		window.history.replaceState({}, '', newUrl);
	}else{
		langbr=lValue;
	} 
	console.log("langbr", langbr);
var lib;
	function gtElInit() {
		 lib = new google.translate.TranslateService();
		lib.translatePage('', langbr, function() {
			// div_loader.style.display="none"; 
			// div_all.style.display="block"; 
		});
	}
</script>
<script async src="https://translate.google.com/translate_a/element.js?cb=gtElInit&amp;hl=pt-PT&amp;client=wt" type="text/javascript"></script>
<style>
	/* --- Google Translate UI Hiding (Existing Code) --- */

	/* Hide top banner */
	.goog-te-banner-frame.skiptranslate {
		display: none !important;
	}

	body {
		top: 0 !important;
	}

	/* Hide tooltip/balloon/rating UI */
	#goog-gt-tt,
	.goog-te-balloon-frame,
	.goog-tooltip {
		display: none !important;
	}

	/* Sometimes the widget injects a fixed bottom-right card */
	#goog-gt-vt,
	.goog-te-gadget-icon {
		display: none !important;
	}

	/* --- Highlight Removal (Updated) --- */

	/* Ensure no visual transitions cause a flash */
	.goog-text-highlight,
	.goog-text-highlight:hover,
	font,
	font:hover {
		transition: none !important;
		-webkit-transition: none !important;
		transition-delay: 0s !important;
	}

	/* Removes permanent highlight */
	.goog-text-highlight {
		background: none !important;
		box-shadow: none !important;
		border: none !important;
	}
    
    /* Removes highlight when a user hovers over the highlighted text */
	.goog-text-highlight:hover {
		background-color: transparent !important;
		box-shadow: none !important;
		border: none !important;
	}
    
    /* Targets the <font> tag element which also causes a hover highlight */
    font:hover {
        background-color: transparent !important;
        box-shadow: none !important;
    }
	/* Aggressively disable all highlighting, hover effects, and transitions on all related elements */
.goog-text-highlight, 
.goog-text-highlight:hover, 
.goog-tooltip, 
.goog-tooltip:hover, 
font, 
font:hover,
span.google-src-text,
span.google-src-text:hover {
    background: none !important;
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
    text-shadow: none !important;
    outline: none !important;
    
    /* Crucial: Zero out any possible delay or animation */
    transition: none !important;
    -webkit-transition: none !important;
    transition-delay: 0s !important;
    animation: none !important;
    
    /* This rule often appears in Google Translate's style for the source text */
    /* cursor: default !important; */
}
</style>



 			<a style="font-size:15px; cursor: pointer;" class="icon" onclick="myFunction();"><b>&#9776;</b></a>
 		</div>
 	</div>

 	<div id="nexttotop" align="center" style="padding-left:10px; padding-right:10px;">
 		<h2></h2> 	
	</div>
 	<script type="text/javascript">
 		// function onresizeFunction() {
 		// 	var clientHeight = document.getElementById("topheaderid").clientHeight;
 		// 	document.getElementById('nexttotop').style.paddingTop = clientHeight + 'px';
 		// }
 		// onresizeFunction();
 	</script>




 	<div id="viewer_v1" class="htr" ></div>



<!-- keep l -->
<script>
//   const params = new URLSearchParams(window.location.search);
  const l = params.get('l');

  if (l) {
    document.querySelectorAll('a[href]').forEach(a => {
      const href = a.getAttribute('href').trim();
      if (!href || href === '#' || href === '') return;

      // Split original href into [base, query, hash]
      const [base, queryAndHash] = href.split('?', 2);
      let query = '';
      let hash = '';

      if (queryAndHash) {
        const hashIndex = queryAndHash.indexOf('#');
        if (hashIndex >= 0) {
          query = queryAndHash.slice(0, hashIndex);
          hash = queryAndHash.slice(hashIndex);
        } else {
          query = queryAndHash;
        }
      }

      const searchParams = new URLSearchParams(query);
      searchParams.set('l', l);

      // Rebuild without trimming the original base
      const newHref = base + '?' + searchParams.toString() + hash;
      a.setAttribute('href', newHref);
    });
  } 

	function menut(lng) {
		 myTopnav.className = "topnav";
		// myFunction();
		lib.translatePage('', lng, function() {
			// div_loader.style.display="none"; 
			// div_all.style.display="block"; 
		});

		closedropdowns();
		// reloadCSS();
		return;
		console.log("lng", lng);
		// setCookieNeverExpires('lang', lng);
		params.set('l', lng);
		window.location.search = params.toString();
		// location.reload();
	} 

	function loadPage(url) {

		fetch(url)
			.then(response => response.text())
			.then(html => {
				document.getElementById('viewer_v1').innerHTML = html;
			})
			.catch(err => {
				document.getElementById('viewer_v1').innerHTML = "<p>Error loading page.</p>";
			});
	}
	function loadPage_v2notw(url) {
  fetch(url)
    .then(r => r.text())
    .then(html => {
      const viewer_v1 = document.getElementById("viewer_v1");

      // Wrap the loaded HTML in a container to keep it isolated
      const wrapper = document.createElement("div");
      wrapper.classList.add("embedded-app");
      wrapper.innerHTML = html;
      viewer_v1.innerHTML = "";
      viewer_v1.appendChild(wrapper);

      // Re-execute scripts inside the wrapper
      wrapper.querySelectorAll("script").forEach(oldScript => {
        const newScript = document.createElement("script");

        // Copy attributes (src, type, etc.)
        Array.from(oldScript.attributes).forEach(attr => {
          newScript.setAttribute(attr.name, attr.value);
        });

        if (oldScript.src) {
          // Resolve relative paths against the loaded page's URL
          newScript.src = new URL(oldScript.getAttribute("src"), url).href;
        } else {
          // Inline script content
          newScript.textContent = oldScript.textContent;
        }

        // Replace with executable script
        oldScript.parentNode.replaceChild(newScript, oldScript);
      });

      // Optional: scope CSS (replace body/html with .embedded-app)
      wrapper.querySelectorAll("style").forEach(style => {
        style.textContent = style.textContent
          .replace(/\bhtml\b/g, ".embedded-app")
          .replace(/\bbody\b/g, ".embedded-app");
      });
    })
    .catch(err => {
      console.error(err);
      document.getElementById("viewer_v1").innerHTML = "<p>Error loading page.</p>";
    });
}
function loadPage_v2(url) {
  fetch(url)
    .then(r => r.text())
    .then(html => {
      const viewer_v1 = document.getElementById('viewer_v1');

      // Create a temporary container to parse HTML
      const tmp = document.createElement('div');
      tmp.innerHTML = html;

      // Extract scripts in order
      const scripts = Array.from(tmp.querySelectorAll('script'));

      // Remove script tags from the HTML so they don‚Äôt appear twice
      scripts.forEach(s => s.remove());

      // Put the cleaned HTML in the viewer_v1
      viewer_v1.innerHTML = tmp.innerHTML;


      // üîπ Force all images to 100% width
      viewer_v1.querySelectorAll('img').forEach(img => {
        img.removeAttribute('width');
        img.removeAttribute('height');
        img.style.setProperty('width', '100%', 'important');
        img.style.setProperty('height', 'auto', 'important');

        const span = img.closest('span');
        if (span) {
          span.style.removeProperty('width');
          span.style.removeProperty('height');
          span.style.setProperty('max-width', '100%', 'important');
          span.style.setProperty('height', 'auto', 'important');
          span.style.setProperty('display', 'block', 'important');
          span.style.setProperty('border', '0', 'important');
          span.style.setProperty('margin', '0', 'important');
        }
      });

      // Now re-inject scripts in order so they execute
      (function runScripts(i) {
        if (i >= scripts.length) return;

        const oldScript = scripts[i];
        const newScript = document.createElement('script');

        // Copy attributes
        Array.from(oldScript.attributes).forEach(attr => {
          newScript.setAttribute(attr.name, attr.value);
        });

        if (oldScript.src) {
          // Remote script
          newScript.src = new URL(oldScript.getAttribute('src'), url).href;
          newScript.onload = () => runScripts(i + 1);
          newScript.onerror = () => runScripts(i + 1);
          document.body.appendChild(newScript);
        } else {
          // Inline script
          newScript.textContent = oldScript.textContent;
          document.body.appendChild(newScript);
          runScripts(i + 1);
        }






		onresizeFunction();
      })(0);
    })
    .catch(err => {
      console.error(err);
      document.getElementById('viewer_v1').innerHTML = "<p>Error loading page.</p>";
    });
}

function loadPage_v2_v1(url) {
  fetch(url)
    .then(r => r.text())
    .then(html => {
      const viewer_v1 = document.getElementById('viewer_v1');
      viewer_v1.innerHTML = html;

      viewer_v1.querySelectorAll('script').forEach(oldScript => {
        const script = document.createElement('script');

        if (oldScript.src) {
          script.src = oldScript.src;
        } else {
          script.textContent = oldScript.textContent;
        }

        // carry over attributes like type/integrity/etc. if you need them
        Array.from(oldScript.attributes).forEach(({ name, value }) => {
          script.setAttribute(name, value);
        });

        oldScript.parentNode.replaceChild(script, oldScript);
      });
    })
    .catch(() => {
      document.getElementById('viewer_v1').innerHTML = "<p>Error loading page.</p>";
    });
}
function loadPage_v2_iframe(url) {
  const viewer_v1 = document.getElementById("viewer_v1");
  viewer_v1.innerHTML = ""; // clear previous

  const iframe = document.createElement("iframe");
  iframe.src = url;
  iframe.paddingTop=myTopnav.height;
  iframe.width = "100%";
  iframe.height = "1000";
  iframe.style.border = "none";

  iframe.onload = () => {
    console.log("Iframe loaded:", url);
    // you can access iframe content if same-origin:
    // const doc = iframe.contentDocument;
    // doc.body.style.background = "lightyellow";
  };

  viewer_v1.appendChild(iframe);
}

async function loadPage_v1(url, addToHistory = true) {
  try {
	// url="https://missionsave.github.io/"+url;
    const resp = await fetch(url);
    if (!resp.ok) throw new Error("HTTP " + resp.status);
    const html = await resp.text();

    // Parse HTML
    const parser = new DOMParser();
    const doc = parser.parseFromString(html, "text/html");

    // Replace viewer_v1 content
    const viewer_v1 = document.getElementById("viewer_v1");
    viewer_v1.innerHTML = doc.body.innerHTML;

    // Execute <script> tags
    viewer_v1.querySelectorAll("script").forEach(oldScript => {
      const newScript = document.createElement("script");
      if (oldScript.src) {
        // newScript.src = oldScript.src; // external script
      } else {
        // newScript.textContent = oldScript.textContent; // inline script
      }
      document.body.appendChild(newScript);
      document.body.removeChild(newScript);
    });

    // Update browser history (for back/forward)
    // if (addToHistory) {
    //   history.pushState({ url }, "", url);
    // }
  } catch (err) {
    document.getElementById("viewer_v1").innerHTML =
      "<p>Error loading page: " + err.message + "</p>";
  }
}

// Handle back/forward buttons
// window.addEventListener("popstate", e => {
//   if (e.state && e.state.url) {
//     loadPage(e.state.url, false); // don't push again
//   }
// });

const path = window.location.pathname.replace(/^\/+/, '');
console.log(path);

const pValue = params.get("p");
if (pValue){ //replace "%2F" from p to "/"
	// Clone current params without 'p'
	const params = new URLSearchParams(window.location.search);
	params.delete('p');

	// Build query string manually for 'p' so slashes stay literal
	const encodedP = encodeURIComponent(pValue).replace(/%2F/g, '/');

	// Combine: 'p' first, then the rest of the params
	let qs = `p=${encodedP}`;
	const rest = params.toString();
	if (rest) qs += `&${rest}`;

	const newUrl = `${window.location.pathname}?${qs}${window.location.hash || ''}`;
	window.history.replaceState({}, '', newUrl);

}

	console.log(pValue);
	if (!pValue || pValue.trim() === "") {
		// loadPage('gest/index.html');
		// loadPage('https://missionsave.github.io/gest/index.html');
		loadPage_v2('https://missionsave.github.io/home.html');
		// loadPage('https://missionsave.github.io/home.html');
		onresizeFunction();
	} else {
		// loadPage("pages/"+pValue);
		// loadPage_v2("pages/"+pValue);
		loadPage_v2("https://missionsave.github.io/pages/"+pValue);
		setTimeout(function () {
			onresizeFunction();
		}, 600);
		// loadPage("https://missionsave.github.io/pages/"+pValue);
	}
</script>
<script>
    // Seletor do Iframe do CMP (Funding Choices/AdSense)
    const CMP_IFRAME_SELECTOR = 'iframe[id^="google_esf"], iframe[src*="fundingchoices"]';

    // 1. Fun√ß√£o para aplicar a exclus√£o de tradu√ß√£o ao elemento pai
    function applyNoTranslate(element) {
        if (element) {
            element.setAttribute("translate", "no");
            element.classList.add("notranslate");
            console.log('CMP element found. Translation disabled for icon container.');
            return true;
        }
        return false;
    }

    // 2. Tentar corrigir o CSS do √≠cone dentro do Iframe
    function fixIconInsideIframe(iframe) {
        try {
            // Isto pode falhar devido √† pol√≠tica de mesma origem (Cross-Origin Policy)
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;

            if (iframeDoc) {
                // Tenta aplicar notranslate ao body do iframe
                iframeDoc.body.setAttribute("translate", "no");
                iframeDoc.body.classList.add("notranslate");

                // Tenta for√ßar a font-family correta para √≠cones (se forem Material Icons)
                const iconElements = iframeDoc.querySelectorAll('.material-icons, .fc-icon, i');
                iconElements.forEach(icon => {
                    icon.setAttribute("translate", "no");
                    icon.classList.add("notranslate");
                    // For√ßar a fonte (Material Icons √© um palpite comum para √≠cones do Google)
                    icon.style.fontFamily = 'Material Icons, Roboto, sans-serif !important';
                    icon.style.fontWeight = 'normal !important';
                    icon.style.fontStyle = 'normal !important';
                });

                console.log('Attempted to fix icon font inside the iframe.');
            }
        } catch (e) {
            // Isto √© esperado se o iframe for cross-origin (pol√≠tica de seguran√ßa)
            console.warn('Could not access iframe content to fix icon. Cross-Origin policy is blocking internal access.', e);
        }
    }

    // 3. Observar e aplicar
    function mutationCallback(mutations, observer) {
        const cmpIframe = document.querySelector(CMP_IFRAME_SELECTOR);
        
        if (cmpIframe) {
            // 3.1. Corrigir o contentor principal
            applyNoTranslate(cmpIframe);

            // 3.2. Observar o evento de carregamento do iframe para tentar corrigir o conte√∫do interno
            // Isto √© necess√°rio porque o conte√∫do interno carrega depois do iframe existir
            cmpIframe.addEventListener('load', () => {
                fixIconInsideIframe(cmpIframe);
            });
            
            // Tentar corrigir imediatamente, pois pode j√° estar carregado
            fixIconInsideIframe(cmpIframe);

            // 3.3. Parar de observar
            observer.disconnect(); 
            console.log('MutationObserver disconnected.');
            return;
        }
    }

    // Inicializar o MutationObserver
    const observer = new MutationObserver(mutationCallback);
    const config = { childList: true, subtree: true };
    observer.observe(document.body, config);
    
</script>
</body>
</html>

 		 		


 		 		